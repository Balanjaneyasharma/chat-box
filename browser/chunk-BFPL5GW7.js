import{a as z,b as $,c as j,d as W}from"./chunk-IYIRW3O7.js";import{a as N}from"./chunk-5QMZOGT5.js";import{b as V,d as B,j as F,l as I}from"./chunk-7NLVHFUL.js";import{H as v,Qa as d,Ra as l,S as w,Sa as k,Ta as P,Ua as O,Wa as r,Xa as s,Y as g,Ya as S,Z as f,Za as b,ab as x,bb as c,hb as m,ib as T,jb as _,kb as D,lb as E,mb as A,pb as p,qb as h,ra as a,rb as u,za as M}from"./chunk-TB5WTPP5.js";var y=class{constructor(i,e){this.message=i,this.self=e,this.createdAt=new Date}};function L(t,i){if(t&1&&(r(0,"span",17),m(1),p(2,"date"),p(3,"lowercase"),s()),t&2){let e=c(2).$implicit;a(),_(" ",h(3,4,u(2,1,e.createdAt,"h:mm a"))," ")}}function R(t,i){if(t&1&&(r(0,"span",17),m(1),p(2,"date"),p(3,"lowercase"),s()),t&2){let e=c(2).$implicit;a(),_(" ",h(3,4,u(2,1,e.createdAt,"dd/MM/yyyy, h:mm a"))," ")}}function q(t,i){if(t&1&&(r(0,"div",14)(1,"span",16),m(2),s(),d(3,L,4,6,"span",17),d(4,R,4,6,"span",17),s()),t&2){let e=c().$implicit,n=c(3);a(2),_(" ",e.message," "),a(),l(n.compare(e.createdAt)?3:-1),a(),l(n.compare(e.createdAt)?-1:4)}}function G(t,i){if(t&1&&(r(0,"span",17),m(1),p(2,"date"),p(3,"lowercase"),s()),t&2){let e=c(2).$implicit;a(),_(" ",h(3,4,u(2,1,e.createdAt,"h:mm a"))," ")}}function Y(t,i){if(t&1&&(r(0,"span",17),m(1),p(2,"date"),p(3,"lowercase"),s()),t&2){let e=c(2).$implicit;a(),_(" ",h(3,4,u(2,1,e.createdAt,"dd/MM/yyyy, h:mm a"))," ")}}function H(t,i){if(t&1&&(r(0,"div",15)(1,"span",16),m(2),s(),d(3,G,4,6,"span",17),d(4,Y,4,6,"span",17),s()),t&2){let e=c().$implicit,n=c(3);a(2),_(" ",e.message," "),a(),l(n.compare(e.createdAt)?3:-1),a(),l(n.compare(e.createdAt)?-1:4)}}function J(t,i){if(t&1&&(r(0,"div",13),d(1,q,5,3,"div",14),d(2,H,5,3,"div",15),s()),t&2){let e=i.$implicit;a(),l(e.self?1:-1),a(),l(e.self?-1:2)}}function K(t,i){if(t&1&&(r(0,"div",8),P(1,J,3,2,"div",13,k),s()),t&2){let e=c(2);a(),O(e.data.messages)}}function Q(t,i){if(t&1){let e=b();r(0,"i",18),x("click",function(){g(e);let o=c(2);return f(o.toogle())}),s()}}function U(t,i){if(t&1){let e=b();r(0,"i",19),x("click",function(){g(e);let o=c(2);return f(o.toogle())}),s()}}function X(t,i){if(t&1){let e=b();r(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3),S(4,"i",4),s(),r(5,"h1",5),m(6),s()(),r(7,"div",2)(8,"i",6),x("click",function(){g(e);let o=c();return f(o.delete())}),s()()(),r(9,"div",7),d(10,K,3,0,"div",8),s(),r(11,"div",9),d(12,Q,1,0,"i",10),d(13,U,1,0,"i",11),r(14,"input",12),A("ngModelChange",function(o){g(e);let C=c();return E(C.message,o)||(C.message=o),f(o)}),x("keydown.enter",function(){g(e);let o=c();return f(o.onClick())}),s()()()}if(t&2){let e=c();a(6),T(e.data.name),a(4),l(e.data.messages?10:-1),a(2),l(e.self?12:-1),a(),l(e.self?-1:13),a(),D("ngModel",e.message)}}var le=(()=>{let i=class i{constructor(){this.ar=w(F),this.rs=w(I),this.ds=w(N),this.groupName="Anonymous Group",this.self=!1,this.today=new Date,this.message=""}ngOnInit(){this.ar.paramMap.pipe(v(n=>(this.message="",this.ds.getSingleData(n.get("id"))))).subscribe({next:n=>{this.data=n},error:n=>{this.rs.navigate(["/chats/chat-not-found"])},complete:()=>{}})}onClick(){if(this.message.trim().length!=0){let n=new y(this.message,this.self);this.data.messages||(this.data.messages=[]),this.data.messages.push(n);let o=this.self?"You":"Anonymous";this.data.recentActivity=o+" : "+this.message,this.data.lastModified=n.createdAt,this.ds.updateDataToServer(this.data).pipe(v(()=>this.ds.getData())).subscribe(C=>{this.ds.updateDateStorage(C)}),this.message=""}}toogle(){this.self=!this.self}compare(n){let o=new Date(n);return this.today.toDateString()===o.toDateString()}delete(){confirm("Are you sure want to delete the group "+this.data.name)&&this.ds.deleteDataFromServer(this.data.id).pipe(v(()=>this.ds.getData())).subscribe(n=>{this.ds.updateDateStorage(n),this.rs.navigate(["/chats"])})}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=M({type:i,selectors:[["app-chat-conversation"]],decls:1,vars:1,consts:[[1,"chat-conversation-section"],[1,"chat-conversation-header"],[1,"chat-header-item"],[1,"user-icon"],[1,"fas","fa-user-friends"],[1,"user-name"],[1,"fa-solid","fa-trash",3,"click"],[1,"message-container"],[1,"check"],[1,"send-message"],[1,"fa-solid","fa-user-tie","mode"],[1,"fa-solid","fa-user-secret","mode"],["type","text","name","","id","","placeholder","Type a message",3,"ngModelChange","keydown.enter","ngModel"],[1,"messages"],[1,"self-message"],[1,"anonymous-message"],[1,"message-text"],[1,"message-time"],[1,"fa-solid","fa-user-tie","mode",3,"click"],[1,"fa-solid","fa-user-secret","mode",3,"click"]],template:function(o,C){o&1&&d(0,X,15,5,"section",0),o&2&&l(C.data?0:-1)},dependencies:[W,z,$,j,V,B],styles:[".chat-conversation-section[_ngcontent-%COMP%]{height:100vh;position:relative;background:url(/assets/Images/Conversation-bg.png) fixed;background-color:#e9e4dc;background-size:contain;display:flex;flex-direction:column;overflow-y:auto}.chat-conversation-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.chat-conversation-section[_ngcontent-%COMP%]::-webkit-scrollbar-button{height:2px}.chat-conversation-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f0f2f5}.chat-conversation-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#c6c6c6}.chat-conversation-header[_ngcontent-%COMP%]{position:sticky;z-index:2;top:0;left:0;width:100%;flex:0 0 auto;display:flex;padding:8px 10px 8px 15px;justify-content:space-between;align-items:center;background-color:#f0f2f5}.chat-header-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.user-icon[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50%;background-color:#cfd5d7;border:2px solid white;display:flex;justify-content:center;align-items:center}.user-icon[_ngcontent-%COMP%]   .fa-user-friends[_ngcontent-%COMP%]{color:#fff;align-self:center}.fa-users[_ngcontent-%COMP%]{color:#54656f}.fa-trash[_ngcontent-%COMP%]{cursor:pointer}.user-name[_ngcontent-%COMP%]{margin:0 0 0 8px;padding:0;font-size:16px;color:#677982;font-weight:400}.message-container[_ngcontent-%COMP%]{flex:1 1 auto}.send-message[_ngcontent-%COMP%]{background-color:#f0f2f5;position:sticky;z-index:2;right:0;bottom:0;width:100%;display:flex;align-items:center;padding:16px 10px 16px 15px}.send-message[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{cursor:pointer;margin:0 10px}.send-message[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;padding:10px;width:98%;margin-left:1%;border:none;border-radius:5px;background-color:#fff;outline:none}.send-message[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-family:Work sans}.self-message[_ngcontent-%COMP%]{margin:2.5px 6px 2.5px auto;background-color:#d9fdd3;border-top-left-radius:10px;border-top-right-radius:0}.anonymous-message[_ngcontent-%COMP%]{background-color:#fff;margin:2.5px 0 2.5px 25px;border-top-left-radius:0;border-top-right-radius:10px}.self-message[_ngcontent-%COMP%], .anonymous-message[_ngcontent-%COMP%]{display:flex;width:fit-content;font-size:13px;font-weight:400;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding:8px 10px;word-break:break-all}.message-text[_ngcontent-%COMP%]{display:block;max-width:30vw;margin-right:5px;margin-bottom:5px}.message-time[_ngcontent-%COMP%]{display:inline-block;align-self:end;margin-left:auto;font-size:9px;margin-top:5px;margin-right:1px}"]});let t=i;return t})();export{le as ChatConversationComponent};
